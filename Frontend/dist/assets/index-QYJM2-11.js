import{a as J,r as d,j as e,L as D,l as pe,u as H,T as M,B as $,C as q,M as fe,b as je,c as V,d as ye,e as we,f as be,g as ve,G as Ne,h as Ie,I as Ce,i as re,k as le,m as ie,n as B,o as C,p as oe,v as Le,S as De,q as A,s as Me,t as Se,V as Te,w as Pe,x as Ee,y as ke,z as Oe,A as me,R as ce,D as Re,E as ze,F as Ae,H as He,J as O,K as Fe}from"./vendor-DA0Roanl.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}})();const Je=async t=>{var n,l;try{return await J.get(`https://video-call-server-hxw6.onrender.com/meeting/live-meeting/${t}`)}catch(c){return{status:!1,error:((l=(n=c==null?void 0:c.response)==null?void 0:n.data)==null?void 0:l.message)||"Error to get live meeting"}}},$e=async()=>{try{return await J.get("https://video-call-server-hxw6.onrender.com/application/app-data")}catch{return null}};function Be(){const[t,n]=d.useState({totalUsers:0,totalMeetings:0});return d.useEffect(()=>{(async()=>{const c=await $e();if(c.status===200){const{totalUser:s,totalMeeting:r}=c.data;n({totalUsers:s,totalMeetings:r})}})()},[]),e.jsxs("div",{className:"flex-1 p-4 md:p-10",children:[e.jsxs("div",{className:"md:flex justify-evenly bg-gradient-to-r from-gray-200 to-white md:px-10 md:py-14 rounded-2xl",children:[e.jsxs("div",{className:"p-4 py-7 lg:pe-10",children:[e.jsxs("h1",{className:"pb-10 text-3xl lg:text-5xl md:leading-snug font-bold text-gray-400",style:{lineHeight:"1.7"},children:["Catch up with ",e.jsx("span",{className:"text-orange-500",children:"Friends"}),", ",e.jsx("br",{})," hold ",e.jsx("span",{className:"text-orange-500",children:"meetings"}),", ",e.jsx("br",{})," and share ",e.jsx("span",{className:"text-orange-500",children:"moments"})]}),e.jsx(D,{to:"/join-meeting",className:"bg-gradient-to-r from-purple-500 to-pink-500 px-3 py-2 rounded text-white font-semibold",children:"Click To Join Meeting"})]}),e.jsx("div",{className:"md:w-1/3 p-8 md:p-0",children:e.jsx("img",{src:"/assets/video-call-image.png",alt:"",className:"w-full"})})]}),e.jsxs("div",{className:"flex flex-col text-center pt-14 pb-10 md:pb-14 lg:w-4/5 lg:mx-auto",children:[e.jsx("h1",{className:"text-6xl lg:text-7xl font-bold text-blue-800 md:tracking-widest py-2 px-4",children:"Live Meeting"}),e.jsxs("div",{className:"flex flex-wrap md:flex-nowrap justify-evenly py-7 font-bold",children:[e.jsxs("div",{className:"w-full md:p-0 pb-6",children:[e.jsx("h1",{className:"text-5xl lg:text-6xl text-gray-400",children:"Live Users"}),e.jsx("p",{className:"text-4xl py-3 text-orange-700",children:t.totalUsers||0})]}),e.jsxs("div",{className:"w-full md:p-0 pb-10",children:[e.jsx("h1",{className:"text-5xl lg:text-6xl text-gray-400",children:"Total Meetings"}),e.jsx("p",{className:"text-4xl py-3 text-orange-700",children:t.totalMeetings||0})]})]})]}),e.jsxs("div",{className:"md:flex justify-evenly bg-gradient-to-r from-white to-gray-200 md:px-10 md:py-14 rounded-2xl mb-5",children:[e.jsxs("div",{className:"p-4 py-7 lg:pe-10 md:w-1/2",children:[e.jsxs("h1",{className:"pb-10 text-xl md:text-2xl lg:text-4xl md:leading-snug font-bold text-gray-400",style:{lineHeight:"1.7"},children:[e.jsx("span",{className:"text-gray-300",children:"Empower Collaboration:"})," Every call, every meeting, every connection brings us closer to ideas, friendships, and growth."]}),e.jsx(D,{to:"schedule-meeting",className:"bg-gradient-to-r from-purple-500 to-pink-500 px-3 py-2 rounded text-white font-semibold",children:"Schedule New Meeting"})]}),e.jsx("div",{className:"md:w-1/3 p-8 md:p-0",children:e.jsx("img",{src:"/assets/schedulemeeting.png",alt:"",className:"w-full"})})]})]})}const Ve=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-center px-5",children:[e.jsx("h1",{className:"text-6xl font-bold text-red-600 mb-4",children:"404"}),e.jsx("p",{className:"text-xl mb-4 text-gray-500",children:"Oops! Page Not Found."}),e.jsx("p",{className:"mb-4 text-gray-500",children:"We couldn't find the page you were looking for. Please check the URL or use the link below to return to the homepage."}),e.jsx(D,{to:"/",className:"bg-blue-500 text-white px-6 py-2 rounded-full hover:bg-blue-600",children:"Go Back to Homepage"})]}),g=pe("https://video-call-server-hxw6.onrender.com");function qe({loginUser:t,handleSnackbar:n}){const l=H(),[c,s]=d.useState(!0),[r,m]=d.useState({meetingID:"",meetingPassword:""}),i=f=>{const{value:x,name:u}=f.target;m(h=>({...h,[u]:x}))},p=async()=>{if(!(t!=null&&t._id))return n(!0,"You need to login.");const{meetingID:f,meetingPassword:x}=r;if(!f||!x)return n(!0,"Please fill in all fields.");if(!g.connected)return n(!0,"Server not connected. please try again.");g.emit("join-meeting",{meetingID:f,meetingPassword:x,user_id:t==null?void 0:t._id})};return d.useEffect(()=>{const f=({meetingTitle:x,meetingId:u})=>{const h=x.split(" ").join("-");l(`/meeting-room/${u}/${h}`,{state:{organizer:!1}})};return g.on("join-meeting-success",f),()=>{g.off("join-meeting-success",f)}},[g,l,n]),e.jsxs("div",{className:"flex-1 p-4 md:p-10 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-green-500 ",children:"Join Meeting"}),e.jsxs("div",{className:"space-y-4 py-5 md:w-2/3 lg:w-1/2 mx-auto border rounded px-2 my-5",children:[e.jsx(M,{label:"Meeting ID",size:"small",className:"w-full",name:"meetingID",value:r.meetingID,onChange:i}),e.jsxs("div",{children:[e.jsx(M,{label:"Meeting Password",size:"small",className:"w-full",name:"meetingPassword",type:c?"password":"text",value:r.meetingPassword,onChange:i}),e.jsx("div",{className:"w-full flex justify-end pt-1",children:e.jsx("button",{className:"flex justify-end text-gray-400 hover:text-green-600 text-sm",onClick:()=>s(!c),children:c?"Show Password":"Hide Password"})})]}),e.jsx($,{type:"button",variant:"outlined",className:"text-green-500 border-red-500",style:{border:"1px solid orange",color:"orange"},onClick:p,children:"Join Meeting"})]})]})}const We=async(t,n)=>{var l,c;try{return await J.post("https://video-call-server-hxw6.onrender.com/auth/login",{username:t,password:n})}catch(s){return{status:!1,error:((c=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:c.message)||"Login failed. Please try again."}}},Ge=async(t,n,l)=>{var c,s;try{const r=await J.post("https://video-call-server-hxw6.onrender.com/auth/register",{name:t,username:n,password:l});return r.status===200?r:null}catch(r){return{status:!1,error:((s=(c=r==null?void 0:r.response)==null?void 0:c.data)==null?void 0:s.message)||"Registration failed. Please try again."}}},_e=async()=>{var t,n;try{return await J.post("https://video-call-server-hxw6.onrender.com/auth/user-profile",{token:localStorage.getItem("authToken")})}catch(l){return{status:!1,error:((n=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:n.message)||"User not login."}}};function Ye({handleLoginUser:t,handleSnackbar:n}){const l=H(),[c,s]=d.useState(!1),[r,m]=d.useState({username:"",password:""}),i=f=>{const{name:x,value:u}=f.target;m(h=>({...h,[x]:u}))},p=async f=>{f.preventDefault(),s(!0);try{const x=await We(r.username,r.password);if((x==null?void 0:x.status)===200){const{user:u,token:h}=x.data;t(u),n(!0,"User Login Successfully"),localStorage.setItem("authToken",h),l("/")}else n(!0,(x==null?void 0:x.error)||"Error in login")}catch(x){n(!0,(x==null?void 0:x.message)||"Error in login")}finally{s(!1),m({username:"",password:""})}};return e.jsx("div",{className:"min-h-screen overflow-auto flex justify-center bg-gray-100 px-4 py-10",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md h-fit w-full max-w-sm my-10",children:[e.jsx("h2",{className:"text-4xl font-semibold text-center text-gray-500 mb-6 pb-5",children:"Login"}),e.jsxs("form",{onSubmit:p,children:[e.jsx("div",{className:"mb-4",children:e.jsx(M,{label:"Username",variant:"outlined",fullWidth:!0,value:r.username,name:"username",onChange:i,size:"small"})}),e.jsx("div",{className:"mb-4",children:e.jsx(M,{label:"Password",variant:"outlined",type:"password",fullWidth:!0,value:r.password,name:"password",onChange:i,size:"small"})}),e.jsx($,{variant:"contained",color:"primary",fullWidth:!0,className:"mb-4",type:"submit",disabled:c,children:c?e.jsx(q,{size:"25px"}):"Login"}),e.jsx("div",{className:"text-center pt-10",children:e.jsxs("p",{className:"text-gray-500",children:["Don't have an account?"," ",e.jsx(D,{to:"/signup",className:"text-blue-700",children:"Sign up"})]})})]})]})})}function Ke({handleSnackbar:t}){const n=H(),[l,c]=d.useState({username:"",name:"",password:""}),[s,r]=d.useState(!1),m=p=>{const{name:f,value:x}=p.target;c(u=>({...u,[f]:x}))},i=async p=>{p.preventDefault(),r(!0);const{name:f,username:x,password:u}=l,h=await Ge(f,x,u);(h==null?void 0:h.status)===200?(t(!0,"User Registered Successfully"),n("/login")):t(!0,(h==null?void 0:h.error)||"Error in signup"),r(!1)};return e.jsx("div",{className:"min-h-screen overflow-auto flex justify-center bg-gray-100 px-4 py-10",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-sm mt-10 h-fit",children:[e.jsx("h2",{className:"text-4xl text-gray-500 font-semibold text-center mb-6 pb-5",children:"Sign Up"}),e.jsxs("form",{onSubmit:i,children:[e.jsx("div",{className:"mb-4",children:e.jsx(M,{label:"Name",variant:"outlined",fullWidth:!0,type:"text",value:l.name,name:"name",onChange:m,size:"small"})}),e.jsx("div",{className:"mb-4",children:e.jsx(M,{label:"Username",variant:"outlined",fullWidth:!0,value:l.username,name:"username",onChange:m,size:"small"})}),e.jsx("div",{className:"mb-4",children:e.jsx(M,{label:"Password",variant:"outlined",type:"password",fullWidth:!0,value:l.password,name:"password",onChange:m,size:"small"})}),e.jsx($,{variant:"contained",color:"primary",fullWidth:!0,className:"mb-4 p-1",type:"submit",disabled:s,children:s?e.jsx(q,{style:{color:"white"},size:"25px"}):"Sign Up"}),e.jsx("div",{className:"text-center text-gray-500 pt-10",children:e.jsxs("p",{children:["Already have an account?"," ",e.jsx(D,{to:"/login",className:"text-blue-700",children:"Login"})]})})]})]})})}const Qe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,px:2,py:3};function Xe({loginUser:t,handleLoginUser:n,handleSnackbar:l,isLoading:c}){const[s,r]=d.useState(!1),[m,i]=d.useState(null),p=!!m,f=H(),x=j=>{i(j.currentTarget)},u=()=>{i(null)},h=async()=>{r(!1),localStorage.removeItem("authToken"),n(null),l(!0,"User logout successfully"),f("/")};return d.useEffect(()=>{const j=document.getElementById("root"),w=()=>{const N=document.getElementById("nav-bar"),S=j.scrollTop;N&&(S>40?N.classList.contains("shadow-lg")||N.classList.add("shadow-lg","bg-[#f3f4f6cc]"):N.classList.remove("shadow-lg","bg-[#f3f4f6cc]"))};return j.addEventListener("scroll",w),()=>{j.removeEventListener("scroll",w)}},[]),e.jsxs(e.Fragment,{children:[e.jsxs("nav",{id:"nav-bar",className:"px-4 sticky top-0 left-0 w-full z-10",children:[e.jsxs("header",{className:"py-3 flex justify-between items-center ",children:[e.jsx("h1",{className:"font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent text-3xl",children:e.jsx(D,{to:"/",children:"Live Meeting"})}),e.jsxs("div",{className:"space-x-5 text-lg text-gray-400 hidden md:block",children:[["Join Meeting","Schedule Meeting","History"].map((j,w)=>e.jsx(D,{className:"hover:text-[#030071]",to:`${j.toLowerCase().split(" ").join("-")}`,children:j},w)),t?e.jsx("button",{onClick:()=>r(!0),children:(t==null?void 0:t.username).substring(0,10)}):e.jsx(D,{className:"hover:text-[#030071]",to:"/login",children:"Login"})]}),e.jsxs("div",{className:"md:hidden",children:[e.jsx($,{id:"basic-button","aria-controls":p?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:x,children:e.jsx(fe,{className:"text-gray-500",style:{fontSize:"1.8rem"}})}),e.jsxs(je,{id:"basic-menu",anchorEl:m,open:p,onClose:u,MenuListProps:{"aria-labelledby":"basic-button"},children:[["Join Meeting","Schedule Meeting","History"].map((j,w)=>e.jsx(D,{className:"hover:text-[#030071] text-gray-400",to:`${j.toLowerCase().split(" ").join("-")}`,children:e.jsx(V,{onClick:u,children:j})},w)),t?e.jsx(V,{onClick:()=>{u(),r(!0)},children:e.jsx("button",{children:(t==null?void 0:t.username).substring(0,10)})}):e.jsx(D,{className:"hover:text-[#030071] text-gray-400",to:"/login",children:e.jsx(V,{onClick:u,children:"Login"})})]})]})]}),c&&e.jsx("div",{children:e.jsx(ye,{color:"secondary",style:{zIndex:5e3},className:""})})]}),e.jsx(we,{open:s,onClose:()=>r(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(be,{sx:Qe,className:"rounded-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-400",children:"Log Out"}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-5",children:[e.jsx("button",{onClick:()=>r(!1),className:"rounded bg-gray-100 px-4 py-1 text-gray-800 hover:bg-gray-300 hover:text-gray-800 border",children:"Cancel"}),e.jsx("button",{onClick:h,className:"rounded bg-gray-100 px-4 py-1 text-gray-800 hover:bg-gray-300 hover:text-gray-800 border",children:"Logout"})]})]})})]})}function Ze(){return e.jsx("footer",{className:"bg-gray-800 text-white py-6",children:e.jsxs("div",{className:"mx-auto md:flex md:justify-between lg:w-5/6 p-5",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold pb-2 bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent text-3xl w-fit",children:e.jsx(D,{to:"/",children:"Live Meeting"})}),e.jsxs("p",{children:["©",` ${new Date().getFullYear()} Live Meeting. All rights reserved.`]})]}),e.jsx("div",{className:"mt-4 flex gap-8",children:[{link:"https://in.linkedin.com/in/nitin-gayke92",Icon:ve,name:"LinkedIn"},{link:"https://github.com/nitingayke",Icon:Ne,name:"GitHub"},{link:"https://x.com/NitinGayke9209",Icon:Ie,name:"Twitter"},{link:"https://www.instagram.com/gaykenitin975/",Icon:Ce,name:"Instagram"}].map((t,n)=>e.jsxs(D,{to:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-center",children:[e.jsx(t.Icon,{className:"text-white hover:text-gray-400",style:{fontSize:"2.2rem"}}),e.jsx("p",{className:"text-sm pt-2 text-gray-500",children:t.name})]},n))})]})})}function Ue({loginUser:t}){var m,i,p,f,x,u,h,j,w,N,S;const[n,l]=d.useState("created-meeting"),c=o=>{const{id:L}=o.target;document.getElementById(n).classList.remove("text-orange-500"),document.getElementById(L).classList.add("text-orange-500"),l(L)},[s,r]=d.useState(null);return e.jsxs("div",{className:"flex-1 p-4 md:px-10",children:[e.jsxs("ul",{className:"flex justify-evenly md:justify-start space-x-10 text-gray-500 mb-4",children:[e.jsx("li",{children:e.jsx("button",{onClick:c,id:"created-meeting",className:"text-orange-500",children:"Created Meeting"})}),e.jsx("li",{children:e.jsx("button",{onClick:c,id:"attended-meeting",children:"Attended Meeting"})})]}),e.jsxs("div",{className:"flex flex-wrap space-x-5",children:[n==="created-meeting"?e.jsx("div",{className:"lg:w-1/3 w-full mb-5",children:e.jsx(re,{className:"border",children:e.jsxs(le,{"aria-label":"simple table",children:[e.jsx(ie,{children:e.jsxs(B,{className:"bg-gray-200",children:[e.jsx(C,{children:"Title"}),e.jsx(C,{align:"right",children:"Join User"}),e.jsx(C,{align:"right",children:"Date"})]})}),e.jsx(oe,{children:(f=(p=(i=(m=t==null?void 0:t.meetingHistory)==null?void 0:m.created)==null?void 0:i.slice())==null?void 0:p.reverse())==null?void 0:f.map((o,L)=>{var I,E,T,R,k;return e.jsxs(B,{sx:{"&:last-child td, &:last-child th":{border:0}},onClick:()=>r(o==null?void 0:o.meetingId),className:"hover:bg-gray-100",children:[e.jsx(C,{className:"truncate whitespace-normal",component:"th",scope:"row",children:(I=o==null?void 0:o.meetingId)==null?void 0:I.title}),e.jsx(C,{align:"right",children:(T=(E=o==null?void 0:o.meetingId)==null?void 0:E.joinUsers)==null?void 0:T.length}),e.jsx(C,{align:"right",children:(k=(R=o==null?void 0:o.meetingId)==null?void 0:R.createdAt)==null?void 0:k.substring(0,10)})]},L)})})]})})}):e.jsx("div",{className:"lg:w-2/5 w-full mb-5",children:e.jsx(re,{className:"border",children:e.jsxs(le,{"aria-label":"simple table",children:[e.jsx(ie,{children:e.jsxs(B,{className:"bg-gray-200",children:[e.jsx(C,{children:"User"}),e.jsx(C,{align:"right",children:"Title"}),e.jsx(C,{align:"right",children:"Users"}),e.jsx(C,{align:"right",children:"Date"})]})}),e.jsx(oe,{children:(h=(u=(x=t==null?void 0:t.meetingHistory)==null?void 0:x.attended)==null?void 0:u.slice())==null?void 0:h.reverse().map((o,L)=>{var I,E,T,R,k,F;return e.jsxs(B,{sx:{"&:last-child td, &:last-child th":{border:0}},onClick:()=>r(o==null?void 0:o.meetingId),className:"hover:bg-gray-100",children:[e.jsx(C,{className:"truncate whitespace-normal",component:"th",scope:"row",children:(I=o==null?void 0:o.meetingId)==null?void 0:I.user}),e.jsx(C,{align:"right",children:(E=o==null?void 0:o.meetingId)==null?void 0:E.title}),e.jsx(C,{align:"right",children:(R=(T=o==null?void 0:o.meetingId)==null?void 0:T.joinUsers)==null?void 0:R.length}),e.jsx(C,{align:"right",children:(F=(k=o==null?void 0:o.meetingId)==null?void 0:k.createdAt)==null?void 0:F.substring(0,10)})]},L)})})]})})}),s&&e.jsxs("div",{className:"flex-1 w-full lg:ps-5",style:{margin:0},children:[e.jsxs("h1",{className:"text-2xl text-gray-500",children:[e.jsx("span",{className:"text-gray-700",children:"Title:"})," ",s==null?void 0:s.title]}),e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("h1",{className:"text-blue-800 text-xl mb-2",children:["Join Users ",e.jsx("span",{className:"text-gray-500 font-semibold",children:(j=s==null?void 0:s.joinUsers)==null?void 0:j.length})]}),e.jsx("div",{className:"flex flex-wrap",children:(w=s==null?void 0:s.joinUsers)==null?void 0:w.map((o,L)=>e.jsx("div",{className:"border px-3 py-1 rounded-full bg-gray-100 h-fit mb-2 mx-1",children:o.username},L))}),e.jsx("div",{className:"border my-3"}),e.jsxs("h1",{className:"text-blue-800 text-xl pb-2",children:["Comments ",e.jsx("span",{className:"text-gray-500 font-semibold",children:(N=s==null?void 0:s.message)==null?void 0:N.length})]}),e.jsx("div",{className:"bg-gray-200 rounded",children:(S=s==null?void 0:s.message)==null?void 0:S.map((o,L)=>e.jsxs("div",{className:"px-3 py-2",children:[e.jsx("h1",{className:"text-blue-900 font-semibold",children:o==null?void 0:o.user}),e.jsx("p",{className:"text-gray-500 bg-gray-100 rounded px-2 py-1",children:o==null?void 0:o.message})]},L))})]})})]})]})]})}function et({loginUser:t,handleSnackbar:n,handleIsLoading:l}){const c=H(),[s,r]=d.useState({name:(t==null?void 0:t.name)||"",meetingTitle:"",meetingID:"",meetingPassword:"",duration:""});d.useEffect(()=>{const u=({status:h,meetingID:j,meetingTitle:w})=>{if(h){const N=w==null?void 0:w.split(" ").join("-");c(`/meeting-room/${j}/${N}`,{state:{organizer:!0}})}};return g.on("schedule-meeting-success",u),()=>{g.off("schedule-meeting-success",u)}},[]);const[m,i]=d.useState(!0),p=u=>{const{name:h,value:j}=u.target;if(h==="duration"&&j>6){document.querySelector(".display-error").innerText="Duration is too long. Set it to less than 6 hours.",n(!0,"Duration is too long. Set it to less than 6 hours.");return}if(h==="duration"&&j<0){document.querySelector(".display-error").innerText="Duration cannot be negative.",n(!0,"Duration cannot be negative.");return}r(w=>({...w,[h]:j})),document.querySelector(".display-error").innerText=""},f=async()=>{const{name:u,meetingTitle:h,meetingID:j,meetingPassword:w,duration:N}=s;if(!u.trim()||!h.trim()||!j.trim()||!w.trim()||!N){document.querySelector(".display-error").innerText="Please fill out all fields.",n(!0,"Please fill out all fields.");return}if(!t){n(!0,"Please login first.");return}g.emit("schedule-meeting",{name:u.trim(),username:t==null?void 0:t.username,meetingTitle:h.trim(),meetingID:j.trim(),meetingPassword:w.trim(),duration:N})},x=()=>{const{meetingID:u,meetingTitle:h,meetingPassword:j}=s,w=`Meeting Details:
            - Title: ${h}
            - ID: ${u}
            - Password: ${j}

            Join the meeting: http://localhost:5173/join-meeting `,S=`https://wa.me/?text=${encodeURIComponent(w)}`;window.open(S,"_blank")};return e.jsxs("div",{className:"flex-1 p-4 md:px-10 text-center",children:[e.jsx("h1",{className:"text-3xl text-green-500 font-semibold py-5",children:"Schedule New Meeting"}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"space-y-5 md:w-3/3 lg:w-1/2 mx-auto md:border md:px-2 py-5 rounded",children:[e.jsx("p",{className:"display-error text-red-500"}),e.jsx(M,{label:"Your Name",size:"small",className:"w-full",name:"name",value:s.name,onChange:p}),e.jsx(M,{label:"Meeting Title",size:"small",className:"w-full",name:"meetingTitle",value:s.meetingTitle,onChange:p}),e.jsxs("div",{children:[e.jsx(M,{label:"Meeting ID",placeholder:"Create Unique ID",size:"small",className:"w-full",name:"meetingID",value:s.meetingID,onChange:p}),e.jsx("button",{className:"flex ps-1 text-gray-400 hover:text-green-600",onClick:()=>r(u=>({...u,meetingID:Le()})),children:"Generate Unique ID"})]}),e.jsxs("div",{children:[e.jsx(M,{label:"Meeting Password",size:"small",className:"w-full",name:"meetingPassword",type:m?"password":"text",value:s.meetingPassword,onChange:p}),e.jsx("div",{className:"w-full flex justify-end",children:e.jsx("button",{className:"flex justify-end text-gray-400 hover:text-green-600 text-sm",onClick:()=>i(!m),children:m?"Show Password":"Hide Password"})})]}),e.jsxs("div",{children:[e.jsx(M,{label:"Duration",placeholder:"e.g., 1.5 hours, 5 hours",size:"small",type:"number",className:"w-full",name:"duration",value:s.duration,onChange:p}),e.jsxs("p",{className:"flex p-1 text-gray-400",children:[s.duration*60," minutes"]})]}),e.jsx($,{type:"button",variant:"outlined",className:"text-green-500 border-red-500",style:{border:"1px solid orange",color:"orange"},onClick:f,children:"Create Meeting"})]}),(s==null?void 0:s.meetingTitle)&&(s==null?void 0:s.meetingID)&&(s==null?void 0:s.meetingPassword)&&e.jsxs("div",{className:"h-fit mx-auto border p-5 rounded md:w-1/3 text-start",children:[e.jsx("h1",{className:"text-gray-500 font-semibold",children:"Meeting Title"}),e.jsx("p",{className:"pb-2 text-blue-900",children:s==null?void 0:s.meetingTitle}),e.jsx("h1",{className:"text-gray-500 font-semibold",children:"Meeting ID"}),e.jsx("p",{className:"pb-2 text-blue-900",children:s==null?void 0:s.meetingID}),e.jsx("h1",{className:"text-gray-500 font-semibold",children:"Meeting Password"}),e.jsx("p",{className:"pb-2 text-blue-900",children:s==null?void 0:s.meetingPassword}),e.jsx("div",{className:"flex justify-end w-full",children:e.jsx("button",{onClick:x,className:"border p-1 rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-200",children:e.jsx(De,{className:"text-green-500"})})})]})]})]})}function tt({buttonState:t,handleButtonState:n,handleLeaveMeeting:l}){return e.jsxs("ul",{className:"flex space-x-5",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>n("isMuteOn"),className:"bg-gray-700 text-white w-10 h-10 rounded-full",children:t!=null&&t.isMuteOn?e.jsx(A,{title:"Mute",children:e.jsx(Me,{className:"text-green-400"})}):e.jsx(A,{title:"Unmute",children:e.jsx(Se,{})})})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>n("isVideoOn"),className:"bg-gray-700 text-white w-10 h-10 rounded-full",children:t!=null&&t.isVideoOn?e.jsx(A,{title:"Turn Off Video",children:e.jsx(Te,{className:"text-green-400"})}):e.jsx(A,{title:"Turn On Video",children:e.jsx(Pe,{})})})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>n("isShareOn"),className:"bg-gray-700 text-white w-10 h-10 rounded-full",children:e.jsx(A,{title:"Not Implemented",children:e.jsx(Ee,{className:"text-gray-500"})})})}),e.jsx("li",{children:e.jsx(A,{title:"Leave Meeting",children:e.jsx("button",{onClick:l,className:"bg-red-500 text-white border-2 border-red-600 w-14 h-10 rounded-3xl hover:bg-transparent hover:text-red-500",children:e.jsx(ke,{})})})})]})}function st(){return d.useEffect(()=>{const t=setInterval(()=>{document.querySelector(".current-time").innerHTML=new Date},1e3);return()=>clearInterval(t)},[]),e.jsx("p",{className:"current-time px-5 text-center"})}class nt{constructor(){this.peer||(this.peer=new RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]}))}async getAnswer(n){if(this.peer){await this.peer.setRemoteDescription(n);const l=await this.peer.createAnswer();return await this.peer.setLocalDescription(new RTCSessionDescription(l)),l}}async setLocalDescription(n){this.peer&&await this.peer.setRemoteDescription(new RTCSessionDescription(n))}async getOffer(){if(this.peer){const n=await this.peer.createOffer();return await this.peer.setLocalDescription(new RTCSessionDescription(n)),n}}}const v=new nt;function at({loginUser:t,handleSnackbar:n}){var ne,ae;const{meetingId:l,title:c}=Oe(),s=me(),r=H(),m=d.useRef(null),[i,p]=d.useState(null),[f,x]=d.useState(null),[u,h]=d.useState([]),[j,w]=d.useState([]),[N,S]=d.useState(!1),[o,L]=d.useState(!1),[I,E]=d.useState(""),[T,R]=d.useState({isMuteOn:!1,isVideoOn:!0,isShareOn:!1}),k=({message:a})=>{n(!0,a)},F=({username:a,message:y})=>{p(b=>({...b,message:[{user:a,message:y},...b==null?void 0:b.message]})),a===(t==null?void 0:t.username)?n(!0,"Message sent successfully."):n(!0,`${a} sent a message.`),E("")},W=async({socketId:a,username:y})=>{w(P=>[...P,{socketId:a,username:y}]),n(!0,`${y} joined the meeting.`);const b=await v.getOffer();g.emit("new-user-call",{socketId:a,offer:b,username:(t==null?void 0:t.username)||"Untitle"})},G=async({offer:a,from:y,username:b})=>{w(z=>[...z,{socketId:y,username:b}]);const P=await v.getAnswer(a);g.emit("user-call-accepted",{to:y,answer:P})},_=()=>{try{for(const a of f.getTracks())v.peer.addTrack(a,f)}catch(a){n(!0,a.message||"error occured, please try again.")}},Y=async({from:a,answer:y})=>{await v.setLocalDescription(y),_()},K=async({from:a,offer:y})=>{const b=await v.getAnswer(y);g.emit("peer-nego-done",{to:a,answer:b})},Q=async({from:a,answer:y})=>{await v.setLocalDescription(y)},X=({socketId:a,streamId:y,username:b})=>{try{u(P=>P.filter(z=>z.id!==y)),w(P=>P.filter(z=>z.username!==b)),n(!0,`${b} left the meeting`)}catch(P){n(!0,P.message||"Error in updating remote stream.")}};d.useEffect(()=>(g.on("meeting-notification",k),g.on("meeting-chat-message-success",F),g.on("user-left-meeting",X),g.on("new-user-join",W),g.on("new-user-join-call",G),g.on("call-accepted-success",Y),g.on("peer-nego-success",K),g.on("peer-nego-done-success",Q),()=>{g.off("meeting-notification",k),g.off("meeting-chat-message-success",F),g.off("user-left-meeting",X),g.off("new-user-join",W),g.off("new-user-join-call",G),g.off("call-accepted-success",Y),g.off("peer-nego-success",K),g.off("peer-nego-done-success",Q)}),[f]);const Z=a=>{const y=a.streams[0];h(b=>b.some(z=>z.id===y.id)?b:[...b,y])},U=async()=>{const a=await v.getOffer();j.forEach(y=>{g.emit("peer-nego-needed",{offer:a,to:y.socketId})})};d.useEffect(()=>(v.peer.addEventListener("track",Z),v.peer.addEventListener("negotiationneeded",U,{once:!0}),()=>{v.peer&&(v.peer.removeEventListener("track",Z),v.peer.removeEventListener("negotiationneeded",U))}),[j,g]);const ee=async()=>{try{S(!0);const a=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0});m.current=a,x(a)}catch(a){a.name==="NotFoundError"&&n(!0,"No camera or microphone found.")}finally{S(!1)}},te=async()=>{try{m.current.getTracks().forEach(a=>{a.kind==="video"&&a.stop()}),m.current=null,x(null)}catch(a){n(!0,a.message||"Error stopping the stream.")}},ue=async()=>{try{S(!0);const a=await Je(l);a.status===200?p({...a.data.currMeeting,message:a.data.currMeeting.message.reverse()}):n(!0,(a==null?void 0:a.error)||"Unable to find current meeting")}catch(a){n(!0,(a==null?void 0:a.message)||"Unable to find current meeting")}finally{S(!1)}};d.useEffect(()=>(ue(),ee(),()=>{m.current&&m.current.getTracks().forEach(a=>a.stop())}),[t]),d.useEffect(()=>{var a;L((a=s.state)==null?void 0:a.organizer)},[t,l]);const se=()=>{try{g.emit("leave-meeting",{meetingId:l,streamId:f.id,username:t.username}),te(),v.peer&&(v.peer.getSenders().forEach(a=>{v.peer.removeTrack(a)}),v.peer.close(),v.peer=null),r("/")}catch(a){n(!0,a.message||"Error leaving the meeting, please try again.")}},xe=a=>{a==="isVideoOn"&&(T.isVideoOn?te():ee()),R(y=>({...y,[a]:!y[a]}))},ge=()=>{_(),L(!0)},he=a=>{a.preventDefault(),g.emit("meeting-chat-message",{username:t==null?void 0:t.username,meetingId:l,message:I})};return i&&(new Date-new Date(i.createdAt))/6e4>i.duration*60?e.jsxs("div",{className:"h-screen flex flex-col py-14 items-center text-white space-y-2 w-full bg-gray-800",children:[e.jsx("h1",{className:"text-2xl text-red-500 font-bold",children:"Meeting has expired."}),e.jsxs("p",{children:["Duration: ",(i==null?void 0:i.duration)*60," minutes"]}),e.jsxs("p",{children:["Date: ",(ne=i==null?void 0:i.createdAt)==null?void 0:ne.substring(0,10)," / ",(ae=i==null?void 0:i.createdAt)==null?void 0:ae.substring(11,19)]}),e.jsx(st,{})]}):!i||!t||N?e.jsxs("div",{className:"h-screen flex flex-col py-14 items-center text-white space-y-2 w-full bg-gray-800",children:[e.jsxs("p",{children:["Meeting Title ",e.jsx("span",{children:c})]}),e.jsxs("p",{children:["Meeting ID ",e.jsx("span",{children:l})]}),N?e.jsx("p",{children:"Loading"}):e.jsx("p",{className:"text-gray-500",children:"Current Live Meeting Not Found, Please Try Again."})]}):e.jsxs(e.Fragment,{children:[!t&&e.jsx("div",{className:"absolute flex flex-col justify-center items-center h-screen w-full z-10 bg-gray-700 opacity-50",children:e.jsx(q,{size:"3rem"})}),u.length>0&&!o&&e.jsx("div",{className:"bg-[#ffffff26] z-10 flex items-center h-full w-full absolute",children:e.jsx("button",{onClick:ge,className:"border mx-auto text-orange-300 border-gray-500 px-10 py-2 rounded-full bg-gray-500 hover:bg-gray-800 hover:text-orange-500",children:"Join"})}),e.jsxs("div",{className:"h-screen bg-gray-800 flex flex-col",children:[e.jsx("div",{className:"flex align-items-center justify-end p-4",children:e.jsx("button",{onClick:se,className:"border-2 border-red-500 hover:bg-red-500 hover:text-white font-semibold text-red-500 px-3 py-1 rounded-full",children:"Leave Meeting"})}),e.jsx("div",{className:"flex-1 flex flex-wrap md:flex-nowrap overflow-hidden px-4 text-white",children:e.jsxs("div",{className:"flex flex-wrap w-full",children:[e.jsxs("div",{className:"meeting-videos grid grid-cols-2 md:h-full overflow-y-auto md:w-3/5 lg:w-3/4 gap-5",children:[e.jsx(ce,{playing:T.isVideoOn,muted:!T.isMuteOn,width:"100%",height:350,url:f}),u.map((a,y)=>e.jsx(ce,{playing:!0,muted:!0,width:"100%",height:350,url:a},y))]}),e.jsx("div",{className:"md:w-2/5 lg:w-1/4 md:ps-2 h-full hidden md:block",children:e.jsxs("div",{className:"flex flex-col border border-gray-600 rounded-xl p-2 h-full relative ",children:[e.jsx("ul",{className:"flex-1 overflow-auto",children:i.message.map((a,y)=>e.jsxs("li",{className:"bg-gray-700 py-1 px-2 rounded mb-2",children:[e.jsx("h1",{className:"text-lg font-semibold",children:a.user}),e.jsx("p",{className:"text-gray-300",children:a.message})]},y))}),e.jsxs("form",{onSubmit:he,className:"mt-2 p-1 border border-gray-500 bg-gray-800 rounded-lg flex items-center sticky left-0 bottom-0",children:[e.jsx("input",{type:"text",className:"bg-transparent flex-grow placeholder-gray-500 outline-0 min-w-14 border-e border-gray-500",placeholder:"Enter message...",value:I,onChange:a=>E(a.target.value)}),e.jsx("button",{type:`${(I==null?void 0:I.length)>0?"submit":"button"}`,className:`p-1 text-sm me-1 ${(I==null?void 0:I.length)>0?" text-white":"text-gray-500"} `,children:"Send"})]})]})})]})}),e.jsx("div",{className:"w-full flex justify-center p-4",children:e.jsx(tt,{buttonState:T,handleButtonState:xe,handleLeaveMeeting:se})})]})]})}function de(t){return e.jsx(Ae,{...t,direction:"up"})}function rt({loginUser:t,handleLoginUser:n,handleSnackbar:l}){const c=me(),s=["/","/join-meeting","/schedule-meeting","/history"].includes(c.pathname),[r,m]=d.useState(!1),i=p=>{m(p)};return d.useEffect(()=>{const p=({message:f})=>{l(!0,f||"network error, please try again.")};return g.on("error",p),()=>{g.off("error",p)}},[]),e.jsxs(e.Fragment,{children:[s&&e.jsx(Xe,{loginUser:t,handleLoginUser:n,handleSnackbar:l,isLoading:r}),e.jsxs(He,{children:[e.jsx(O,{path:"/",element:e.jsx(Be,{})}),e.jsx(O,{path:"/login",element:e.jsx(Ye,{handleLoginUser:n,handleSnackbar:l})}),e.jsx(O,{path:"/signup",element:e.jsx(Ke,{handleSnackbar:l})}),e.jsx(O,{path:"/join-meeting",element:e.jsx(qe,{loginUser:t,handleSnackbar:l})}),e.jsx(O,{path:"/history",element:e.jsx(Ue,{loginUser:t})}),e.jsx(O,{path:"/schedule-meeting",element:e.jsx(et,{loginUser:t,handleSnackbar:l,handleIsLoading:i})}),e.jsx(O,{path:"/meeting-room/:meetingId/:title",element:e.jsx(at,{loginUser:t,handleSnackbar:l})}),e.jsx(O,{path:"*",element:e.jsx(Ve,{})})]}),s&&e.jsx(Ze,{})]})}function lt(){const[t,n]=d.useState(null),l=m=>{n(m)};d.useEffect(()=>{(async()=>{var p;const i=await _e();(i==null?void 0:i.status)===200?n((p=i==null?void 0:i.data)==null?void 0:p.user):(n(null),r(!1,(i==null?void 0:i.error)||"User not login"))})()},[]);const[c,s]=d.useState({open:!1,message:""}),r=(m,i)=>{s({message:i,open:m})};return e.jsxs(Re,{children:[e.jsx(rt,{loginUser:t,handleLoginUser:l,handleSnackbar:r}),e.jsx(ze,{open:c.open,onClose:()=>r(!1),TransitionComponent:de,message:c.message,autoHideDuration:4800},de.name)]})}Fe.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(lt,{})}));
